Execute (Load plugins):
  call ext#plugins#load(["test_plugin"])
  
Then (Test plugin's directories are present in runtimepath in correct order):
  Assert match(&runtimepath, "test_plugin,") >= 0
  Assert match(&runtimepath, "test_plugin/after,") >= 0
  Assert match(&runtimepath, "test_plugin,") < match(&runtimepath, "test_plugin/after,")

Execute (Vader plugin is loaded):
  let loaded_scripts = execute("scriptnames")
  Assert match(loaded_scripts, "/ftdetect/vader.vim") >= 0
  Assert match(loaded_scripts, "/plugin/vader.vim") >= 0

Execute (Search for Vader help file):
  execute "helpgrep \\<vader.txt\\>"

Then (Vader help file is found):
  Assert len(getqflist()) > 0
