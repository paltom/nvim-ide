Given vim (Vimscript buffer):
  if 1
    echo "test"
  endif

Do (Insert tab at the beginning of line):
  I\<tab>

Expect (Line indented with 2 spaces):
    if 1
    echo "test"
  endif

Do (Shift line right):
  >>

Expect (Line indented with 2 spaces):
    if 1
    echo "test"
  endif

Do (Shift line left):
  j
  <<

Expect (Line dedented with 2 spaces):
  if 1
  echo "test"
  endif

Given vim (Improperly formatted Vimscript buffer):
   let a = 1
  let b = 2

Do (Insert tab at the beginning of line):
  I\<tab>

Expect (Line is indented with 2 spaces):
    let a = 1
  let b = 2

Do (Shift line left):
  <<

Expect (Line is properly formatted):
  let a = 1
  let b = 2

Given text (Text buffer):

Execute (Store variables):
  let expandtab = &expandtab
  let tabstop = &tabstop
  let softtabstop = &softtabstop
  let shiftwidth = &shiftwidth
  let shiftround = &shiftround

Given vim (Vimscript buffer):

Execute (Change filetype):
  set filetype=text

Then (Settings are restored):
  AssertEqual expandtab, &expandtab
  AssertEqual tabstop, &tabstop
  AssertEqual softtabstop, &softtabstop
  AssertEqual shiftwidth, &shiftwidth
  AssertEqual shiftround, &shiftround
