Given vim (Vimscript buffer):

Execute (expandtab is set in after/ftplugin/vim.vim):
  AssertEqual config#vim_home."/"."after/ftplugin/vim.vim",
  \pack#internal_tests#option_set_path("expandtab")

Execute (tabstop is set in after/ftplugin/vim.vim):
  AssertEqual config#vim_home."/"."after/ftplugin/vim.vim",
  \pack#internal_tests#option_set_path("tabstop")

Execute (softtabstop is set in after/ftplugin/vim.vim):
  AssertEqual config#vim_home."/"."after/ftplugin/vim.vim",
  \pack#internal_tests#option_set_path("softtabstop")

Execute (shiftwidth is set in after/ftplugin/vim.vim):
  AssertEqual config#vim_home."/"."after/ftplugin/vim.vim",
  \pack#internal_tests#option_set_path("shiftwidth")

Execute (shiftround is set in after/ftplugin/vim.vim):
  AssertEqual config#vim_home."/"."after/ftplugin/vim.vim",
  \pack#internal_tests#option_set_path("shiftround")

Execute (change filetype):
  setlocal filetype=test

Then (expandtab, tabstop, softtabstop, shiftwidth, shiftround are restored by ftplugin.vim):
  AssertEqual expand($VIMRUNTIME)."/ftplugin.vim",
  \pack#internal_tests#option_set_path("expandtab")
  AssertEqual expand($VIMRUNTIME)."/ftplugin.vim",
  \pack#internal_tests#option_set_path("tabstop")
  AssertEqual expand($VIMRUNTIME)."/ftplugin.vim",
  \pack#internal_tests#option_set_path("softtabstop")
  AssertEqual expand($VIMRUNTIME)."/ftplugin.vim",
  \pack#internal_tests#option_set_path("shiftwidth")
  AssertEqual expand($VIMRUNTIME)."/ftplugin.vim",
  \pack#internal_tests#option_set_path("shiftround")
