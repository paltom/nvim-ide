Given (Some text in buffer):
  Line 1 with text
  Line 2 with text2

Do (Insert and trigger autocompletion):
  Go
  te
  \<c-j>

Expect ("text" should be inserted):
  Line 1 with text
  Line 2 with text2
  text

Do (Insert and trigger autocompletion backwards):
  Go
  te
  \<c-k>

Expect ("text2" should be inserted):
  Line 1 with text
  Line 2 with text2
  text2

Do (Search directories in cmdline mode):
  :e \<tab>
  \<up>\<up>
  \<cr>

Then ("tests" directory was opened):
  Assert bufname() =~# "tests"

Do (Search directories in cmdline mode):
  :e \<tab>
  \<c-k>\<c-k>
  \<cr>

Then ("tests" directory was opened):
  Assert bufname() =~# "tests"

Do (Search directories in cmdline mode):
  :e \<tab>
  \<down>
  \<cr>

Then ("README.md" file was opened):
  AssertEqual bufname(), "README.md"

Do (Search directories in cmdline mode):
  :e \<tab>
  \<c-j>
  \<cr>

Then ("README.md" file was opened):
  AssertEqual bufname(), "README.md"

Do (Search directories in cmdline mode):
  :e \<tab>
  \<down>\<down>
  \<right>
  \<cr>

Then ("after/ftplugin" directory was opened):
  Assert bufname() =~# "after/ftplugin"

Do (Search directories in cmdline mode):
  :e \<tab>
  \<down>\<down>
  \<c-l>
  \<cr>

Then ("after/ftplugin" directory was opened):
  Assert bufname() =~# "after/ftplugin"

Do (Search directories in cmdline mode):
  :e \<tab>
  \<up>\<up>\<up>\<right>
  \<left>
  \<cr>

Then ("LICENSE" file was opened):
  AssertEqual bufname(), "LICENSE"

Do (Search directories in cmdline mode):
  :e \<tab>
  \<up>\<up>\<up>\<right>
  \<c-h>
  \<cr>

Then ("LICENSE" file was opened):
  AssertEqual bufname(), "LICENSE"
